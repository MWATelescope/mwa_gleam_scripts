
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<link rel="stylesheet" type="text/css" href="eorlive.css">
<head>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script src="jquery-latest.js"></script>
  <script type="text/javascript">
    

    google.load("visualization", "1", {'packages':['table']});

    function loadLog()
    {
    
    

    var queryText=encodeURIComponent('select A,B,C,D,E');
    var key='0Au_2bmQn8fR4dHFqb0VwNHpKdjBoWFZrVzV3dm8zenc';
    var query = new google.visualization.Query('http://spreadsheets.google.com/a/google.com/tq?key='+key+'&tq='+queryText);
    document.getElementById("obslog").innerHTML="http://spreadsheets.google.com/a/google.com/tq?key="+key+"&tq="+queryText;
    
    query.send(
    function(response){
    if (response.isError()) {
    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
    return;
    }
    var data = response.getDataTable();
    var table = new google.visualization.Table(document.getElementById("obslog"));
    table.draw(data, {showRowNumber: false});
    });
    }


    

    function createXHR()
    {
    try{
    return new XMLHttpRequest();
    }
    catch(e) {
    try {
    return new ActiveXObject("Microsoft.XMLHTTP");
    }
    catch(e) {
    return new ActiveXObject("Msxml2.XMLHTTP");
    }
    }
    }

    <!-- This Function get's the time of the next Observation-->
    function getNextObs()
    {
    var xhr=createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("nextobs").innerHTML=xhr.responseText;
    }
    }
    xhr.open("GET","NextG9Obs.php",true);
    xhr.send();
    }

    function recentData()
    {
    var xhr = createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("LastData").innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","LastData.php",true);
    xhr.send();
    }



    function showG9()
    {
    var xhr = createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("G9Div").innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","G9Total.php",true);
    xhr.send();
    }
    
    function getTime()
    {
    var xhr=createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("timeMIT").innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","ServerTime.php",true);
    xhr.send();
    }
    
    function commandCount()
    {
    var xhr=createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("commandCount").innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","CommandCount.php",true);
    xhr.send();
    }
    
    function goodCount(rx_id)
    {
    rx_id=rx_id.toString();
    var xhr=createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("goodCount"+rx_id).innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","GoodCount.php?rx_id="+rx_id,true);
    xhr.send();
    }


    function diskSpace()
    {
    var xhr=createXHR();
    xhr.onreadystatechange=function()
    {
    if(xhr.status==200 && xhr.readyState==4)
    {
    document.getElementById("diskSpace").innerHTML=xhr.responseText;
    }
    };
    xhr.open("GET","DiskSpace.php");
    xhr.send();
    }


    function goodCounts()
    {
    for(var i = 1; i<=16; i++)
			  {
			  goodCount(i);
			  }
			  }
			  
			  function init()
			  {
			  getTime();
			  getNextObs();
			  }
			  window.onload=init();
			 google.setOnLoadCallback(loadLog);
			 var refresh1=window.setInterval("getTime()",1000);
			 var refresh2=window.setInterval("getNextObs()",60000);
  </script>
</head>

<body>
<div id="title" class="title">
<h1> EoR Observing Webpage </h1>
</div>
<table class="timetable" id="timetable">
<tr> <th> MIT </th> <th> Curtin </th> </tr>
<tr> <td> <div id="timeMIT" class="time">Loading...</div></td><td> <div="timeCurtin"> </td></tr>
</table>
<div id="nextobstitle" class="leftlabel">
<h2>Next Observation in : </h2><div id="nextobsinner" class="nextobsinner"></div>
<div id="nextobs" class="righdata">
</div>
</div>
</div>
<div id="obslogwrapper" class="wrapper">
<a href= ></a>
<div id="obslog" class="obslog">
Loading...
</div>\
</div>
</body>
</html>
